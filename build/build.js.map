{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/container.js","src/dom.js","src/index.js","src/map.js"],"names":[],"mappings":"AAAA;;;;;;;;ACAA;;;;AACA;;;;AACA,IAAI,IAAI,CAAJ;AACJ,IAAI,IAAI,CAAJ;AACJ,IAAI,WAAW,CAAX;AACJ,IAAI,aAAa,CAAb;;AAEJ,SAAS,eAAT,CAAyB,IAAzB,EAA+B,SAA/B,EAA0C;AACtC,WAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAS,CAAT,EAAY;AAC3C,YAAI,EAAE,OAAF,KAAc,EAAd,IAAoB,EAAE,OAAF,KAAc,EAAd,EAAkB;;AACtC,gBAAI,MAAM,aAAa,GAAb,GAAmB,KAAK,EAAL,GAAU,CAA7B,CAD4B;AAEtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAFiC;AAGtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAHiC;AAItC,iBAAK,SAAL,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,QAAtB,EAAgC,UAAhC,EAJsC;SAA1C;AAMA,YAAI,EAAE,OAAF,KAAc,EAAd,IAAoB,EAAE,OAAF,KAAc,EAAd,EAAkB;;AACtC,gBAAI,MAAM,aAAa,GAAb,GAAmB,KAAK,EAAL,GAAU,CAA7B,CAD4B;AAEtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAFiC;AAGtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAHiC;AAItC,iBAAK,SAAL,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,QAAtB,EAAgC,UAAhC,EAJsC;SAA1C;AAMA,YAAI,EAAE,OAAF,KAAc,EAAd,IAAoB,EAAE,OAAF,KAAc,EAAd,EAAkB;;AACtC,gBAAI,MAAM,aAAa,GAAb,GAAmB,KAAK,EAAL,GAAU,CAA7B,CAD4B;AAEtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAFiC;AAGtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAHiC;AAItC,iBAAK,SAAL,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,QAAtB,EAAgC,UAAhC,EAJsC;SAA1C;AAMA,YAAI,EAAE,OAAF,KAAc,EAAd,IAAoB,EAAE,OAAF,KAAc,EAAd,EAAkB;;AACtC,gBAAI,MAAM,aAAa,GAAb,GAAmB,KAAK,EAAL,GAAU,CAA7B,CAD4B;AAEtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAFiC;AAGtC,iBAAK,KAAK,GAAL,CAAS,GAAT,IAAgB,EAAhB,CAHiC;AAItC,iBAAK,SAAL,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,QAAtB,EAAgC,UAAhC,EAJsC;SAA1C;KAnB+B,CAAnC,CADsC;AA2BtC,WAAO,gBAAP,CAAwB,WAAxB,EAAqC,UAAS,CAAT,EAAY;AAC7C,mBAAW,EAAE,CAAF,GAAM,KAAK,YAAL,GAAoB,GAA1B,GAAiC,CAAC,CAAD,CADC;AAE7C,qBAAa,EAAE,CAAF,GAAM,KAAK,WAAL,GAAmB,GAAzB,CAFgC;AAG7C,aAAK,SAAL,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,QAAtB,EAAgC,UAAhC,EAH6C;KAAZ,CAArC,CA3BsC;AAgCtC,QAAI,OAAO,CAAC;AACR,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;KALO,EAMR;AACC,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;KAXO,EAYR;AACC,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;KAjBO,EAkBR;AACC,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;KAvBO,CAAP;;AAhCkC,2BA0DtC,CAAc,SAAd,EA1DsC;CAA1C;;AA+DA,SAAS,IAAT,CAAc,KAAd,EAAqB,CAArB,EAAwB,CAAxB,EAA2B,QAA3B,EAAqC,UAArC,EAAiD;AAC7C,UAAM,KAAN,CAAY,kBAAZ,IAAkC,CAAC,GAAK,CAAC,CAAD,GAAO,KAAb,GAAsB,IAAK,CAAC,CAAD,GAAO,WAAlC;;;AADW,iBAI7C,CAAI,SAAJ,CAAc,KAAd,EAAqB;AACjB,mBAAW,CAAC,CAAD,EAAI,CAAJ,EAAO,GAAP,CAAX;AACA,gBAAQ,CAAC,QAAD,EAAW,CAAX,EAAc,UAAd,CAAR;KAFJ,EAJ6C;CAAjD;QAUI;;;;;;;;AChFJ,IAAI,MAAM,EAAN;;AAEJ,IAAI,MAAJ,GAAa,UAAS,IAAT,EAAe;AACxB,WAAO,SAAS,aAAT,CAAuB,IAAvB,CAAP,CADwB;CAAf;;AAIb,IAAI,SAAJ,GAAgB,UAAS,GAAT,EAAc,OAAd,EAAuB;AACnC,QAAI,0BACe,QAAQ,SAAR,CAAkB,CAAlB,aAA2B,QAAQ,SAAR,CAAkB,CAAlB,aAA2B,QAAQ,SAAR,CAAkB,CAAlB,yBAC/D,QAAQ,MAAR,CAAe,CAAf,0BACA,QAAQ,MAAR,CAAe,CAAf,0BACA,QAAQ,MAAR,CAAe,CAAf,gBAJN,CAD+B;AAOnC,QAAI,KAAJ,CAAU,SAAV,GAAsB,MAAtB,CAPmC;AAQnC,WAAO,GAAP,CARmC;CAAvB;;AAWhB,IAAI,IAAJ,GAAW,UAAS,GAAT,EAAc,OAAd,EAAuB;;AAE9B,YAAQ,GAAR,CAAY,OAAZ,EAF8B;AAG9B,QAAI,KAAJ,CAAU,KAAV,GAAqB,QAAQ,CAAR,OAArB,CAH8B;AAI9B,QAAI,KAAJ,CAAU,MAAV,GAAsB,QAAQ,CAAR,OAAtB,CAJ8B;AAK9B,QAAI,KAAJ,CAAU,kBAAV,IAAgC,QAAQ,KAAR,CALF;AAM9B,WAAO,GAAP,CAN8B;CAAvB;kBAQI;;;;;;;;;;ACzBf;;;AAGA,OAAO,eAAP;QAEI;;;;;;;;;;ACLJ;;;;;;AAEA,SAAS,aAAT,CAAuB,IAAvB,EAAwC;QAAX,8DAAQ,iBAAG;;AACpC,UAAM,IAAN,CAAW,KAAK,UAAL,CAAX,CAA4B,OAA5B,CAAoC,gBAAQ;AACxC,YAAI,KAAK,QAAL,KAAkB,CAAlB,EAAqB;AACrB,0BAAc,IAAd,EAAoB,EAAE,KAAF,CAApB;;AADqB,yBAGrB,CAAI,SAAJ,CAAc,IAAd,EAAoB;AAChB,2BAAW,CAAC,CAAD,EAAI,CAAJ,EAAO,QAAS,CAAC,CAAD,CAA3B;AACA,wBAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAR;aAFJ,EAHqB;SAAzB;KADgC,CAApC,CADoC;CAAxC;;AAaA,SAAS,OAAT,CAAiB,IAAjB,EAAuB;AACnB,QAAI,MAAM,EAAN,CADe;AAEnB,SAAK,OAAL,CAAa,gBAAQ;AACjB,YAAI,IAAJ,CAAS,eAAe,IAAf,CAAT,EADiB;KAAR,CAAb,CAFmB;AAKnB,WAAO;AACH,gBAAQ,gBAAS,MAAT,EAAiB;AACrB,gBAAI,OAAJ,CAAY;uBAAY,OAAO,WAAP,CAAmB,QAAnB;aAAZ,CAAZ,CADqB;SAAjB;KADZ,CALmB;CAAvB;;AAYA,SAAS,cAAT,CAAwB,OAAxB,EAAiC;AAC7B,cAAU,OAAO,MAAP,CAAc;AACpB,WAAG,CAAH;AACA,WAAG,CAAH;AACA,WAAG,CAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,WAAG,GAAH;AACA,eAAO,MAAP;KAPM,EAQP,OARO,CAAV;;;AAD6B,WAYtB,cAAI,IAAJ,CACH,cAAI,SAAJ,CACI,cAAI,MAAJ,CAAW,KAAX,CADJ,EACuB;AACf,mBAAW,CAAC,QAAQ,CAAR,EAAW,QAAQ,CAAR,EAAW,QAAQ,CAAR,CAAlC;AACA,gBAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAR;KAHR,CADG,EAKK;AACJ,WAAG,QAAQ,CAAR;AACH,WAAG,QAAQ,CAAR;AACH,eAAO,QAAQ,KAAR;KARR,CAAP,CAZ6B;CAAjC;QAwBS;QAAe","file":"build.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import dom from './dom'\nimport { parseTemplate, loadMap } from './map'\nvar x = 0;\nvar y = 0;\nvar vertical = 0;\nvar horizontal = 0;\n\nfunction createContainer(view, container) {\n    window.addEventListener('keydown', function(e) {\n        if (e.keyCode === 37 || e.keyCode === 65) { // <=\n            var num = horizontal / 360 * Math.PI * 2;\n            x += Math.cos(num) * 10;\n            y -= Math.sin(num) * 10;\n            move(container, x, y, vertical, horizontal);\n        }\n        if (e.keyCode === 38 || e.keyCode === 87) { // ^\n            var num = horizontal / 360 * Math.PI * 2;\n            x -= Math.sin(num) * 10;\n            y -= Math.cos(num) * 10;\n            move(container, x, y, vertical, horizontal);\n        }\n        if (e.keyCode === 39 || e.keyCode === 68) { // =>\n            var num = horizontal / 360 * Math.PI * 2;\n            x -= Math.cos(num) * 10;\n            y += Math.sin(num) * 10;\n            move(container, x, y, vertical, horizontal);\n        }\n        if (e.keyCode === 40 || e.keyCode === 83) { // v\n            var num = horizontal / 360 * Math.PI * 2;\n            x += Math.sin(num) * 10;\n            y += Math.cos(num) * 10;\n            move(container, x, y, vertical, horizontal);\n        }\n    });\n    window.addEventListener('mousemove', function(e) {\n        vertical = e.y / view.clientHeight * 360 * (-1);\n        horizontal = e.x / view.clientWidth * 360;\n        move(container, x, y, vertical, horizontal);\n    })\n    var data = [{\n        x: 100,\n        y: 100,\n        w: 100,\n        l: 100,\n        h: 100\n    }, {\n        x: 150,\n        y: 100,\n        w: 100,\n        l: 100,\n        h: 150\n    }, {\n        x: 200,\n        y: 100,\n        w: 100,\n        l: 100,\n        h: 200\n    }, {\n        x: 150,\n        y: 100,\n        w: 100,\n        l: 100,\n        h: 250\n    }]\n    // loadMap(data).render(container);\n    parseTemplate(container);\n}\n\n\n\nfunction move(world, x, y, vertical, horizontal) {\n    world.style['transform-origin'] = (x * (-1)) + 'px ' + (y * (-1)) + 'px -150px';\n    // world.style['transform'] = 'translate3d(' + x + 'px, ' + y + 'px, 700px) ' +\n    //     'rotateX(' + vertical + 'deg) rotateY(0deg) rotateZ(' + horizontal + 'deg)';\n    dom.transform(world, {\n        translate: [x, y, 700],\n        rotate: [vertical, 0, horizontal]\n    })\n}\nexport {\n    createContainer\n};\n","var dom = {};\n\ndom.create = function(type) {\n    return document.createElement(type)\n}\n\ndom.transform = function(dom, options) {\n    var string =\n        `translate3d(${options.translate[0]}px, ${options.translate[1]}px, ${options.translate[2]}px) \\\n    rotateX(${options.rotate[0]}deg) \\\n    rotateY(${options.rotate[1]}deg) \\\n    rotateZ(${options.rotate[2]}deg)\n    `\n    dom.style.transform = string;\n    return dom;\n}\n\ndom.size = function(dom, options) {\n    // TODO: height(tall)\n    console.log(options);\n    dom.style.width = `${options.w}px`;\n    dom.style.height = `${options.l}px`;\n    dom.style['background-color'] = options.color;\n    return dom;\n}\nexport default dom;\n","import { createContainer } from './container.js'\n\n// for development\nwindow.createContainer = createContainer;\nexport {\n    createContainer\n}\n","import dom from './dom'\n\nfunction parseTemplate(root, level = 0) {\n    Array.from(root.childNodes).forEach(node => {\n        if (node.nodeType === 1) {\n            parseTemplate(node, ++level);\n            // FIXME: Will override previous transform attributes\n            dom.transform(node, {\n                translate: [0, 0, level * (-5)],\n                rotate: [0, 0, 0]\n            })\n        }\n    })\n}\n\nfunction loadMap(data) {\n    var map = [];\n    data.forEach(tile => {\n        map.push(createBuilding(tile))\n    })\n    return {\n        render: function(target) {\n            map.forEach(building => target.appendChild(building));\n        }\n    }\n}\n\nfunction createBuilding(options) {\n    options = Object.assign({\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 100,\n        l: 100,\n        h: 100,\n        color: '#000'\n    }, options)\n\n    // TODO: Use compose function\n    return dom.size(\n        dom.transform(\n            dom.create('div'), {\n                translate: [options.x, options.y, options.x],\n                rotate: [0, 0, 0]\n            }), {\n            w: options.w,\n            l: options.l,\n            color: options.color\n        }\n    )\n}\nexport { parseTemplate, loadMap }\n"]}